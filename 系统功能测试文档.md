# 部门工作任务管理系统功能测试文档

## 📋 文档信息
- **文档名称**: 系统功能测试文档
- **创建日期**: 2025-01-08
- **版本**: v1.0
- **测试范围**: 基于前端页面的完整功能测试
- **测试原则**: 所有测试数据必须通过前端页面输入，禁止直接在后端创建测试数据

---

## 🎯 测试概述

### 测试目标
1. 验证系统所有功能模块的完整性和正确性
2. 确保用户界面操作的流畅性和易用性
3. 验证不同用户角色的权限控制
4. 测试业务流程的端到端完整性

### 测试环境
- **前端地址**: http://localhost:5173/
- **后端地址**: http://localhost:3000/
- **数据库**: SQLite (test.db)
- **浏览器**: Chrome/Firefox/Edge

### 测试数据原则
- ✅ **允许**: 通过前端页面创建的所有测试数据
- ❌ **禁止**: 直接在后端数据库中插入测试数据
- ✅ **允许**: 使用系统提供的数据导入功能（如果存在）

---

## 📝 测试用例详细说明

## 1. 用户认证系统测试

### 1.1 用户注册功能测试

**测试用例ID**: TC_AUTH_001  
**测试目标**: 验证用户注册功能的完整性

**前置条件**: 
- 系统正常运行
- 访问注册页面 `/register`

**测试步骤**:
1. 打开浏览器，访问 http://localhost:5173/register
2. 填写注册信息：
   - 用户名: `test_user_001`
   - 邮箱: `test001@example.com`
   - 密码: `Test123456`
   - 确认密码: `Test123456`
   - 真实姓名: `测试用户001`
   - 角色: `团队成员`
3. 点击"注册"按钮
4. 观察系统响应和页面跳转

**预期结果**:
- 注册成功，显示成功提示信息
- 自动跳转到登录页面或主页
- 用户信息正确保存到系统中

**测试数据**:
```
用户1: test_user_001, test001@example.com, 团队成员
用户2: test_manager_001, manager001@example.com, 部门经理  
用户3: test_admin_001, admin001@example.com, 管理员
```

### 1.2 用户登录功能测试

**测试用例ID**: TC_AUTH_002  
**测试目标**: 验证用户登录功能和权限控制

**前置条件**: 
- 已完成用户注册测试
- 访问登录页面 `/login`

**测试步骤**:
1. 访问 http://localhost:5173/login
2. 输入用户名和密码
3. 点击"登录"按钮
4. 验证登录成功后的页面内容和权限

**测试数据**:
```
正确登录: test_user_001 / Test123456
错误密码: test_user_001 / WrongPassword
不存在用户: nonexistent_user / Test123456
```

**预期结果**:
- 正确凭据登录成功，跳转到主页
- 错误凭据显示相应错误信息
- 不同角色用户看到对应的功能菜单

---

## 2. 任务管理模块测试

### 2.1 任务创建功能测试

**测试用例ID**: TC_TASK_001  
**测试目标**: 验证任务创建功能的完整性

**前置条件**: 
- 用户已登录系统
- 访问任务创建页面

**测试步骤**:
1. 登录系统（使用部门经理账号）
2. 导航到任务管理 → 创建任务
3. 填写任务信息：
   - 任务名称: `测试任务001 - 系统功能验证`
   - 任务描述: `这是一个用于验证系统功能的测试任务，包含完整的任务属性设置`
   - 任务类型: `项目管理工作`
   - 优先级: `高`
   - 开始时间: `2025-01-08`
   - 结束时间: `2025-01-15`
   - 负责人: 选择已注册的团队成员
4. 点击"创建任务"按钮
5. 验证任务创建成功

**测试数据**:
```
一级任务:
- 任务名称: "系统功能测试项目"
- 类型: "项目管理工作"
- 优先级: "高"
- 负责人: test_manager_001

二级任务:
- 任务名称: "前端功能测试"
- 父任务: "系统功能测试项目"
- 类型: "项目管理工作"
- 负责人: test_user_001

子任务:
- 任务名称: "登录功能测试"
- 父任务: "前端功能测试"
- 类型: "项目管理工作"
- 负责人: test_user_001
```

**预期结果**:
- 任务创建成功，显示在任务列表中
- 任务信息完整保存
- 负责人收到任务分配通知
- 任务层级关系正确建立

### 2.2 任务状态管理测试

**测试用例ID**: TC_TASK_002  
**测试目标**: 验证任务状态变更功能

**前置条件**: 
- 已创建测试任务
- 使用任务负责人账号登录

**测试步骤**:
1. 登录系统（使用任务负责人账号）
2. 进入任务列表页面
3. 找到分配给自己的任务
4. 点击任务详情
5. 测试状态变更：
   - 未开始 → 进行中
   - 进行中 → 已暂停
   - 已暂停 → 进行中
   - 进行中 → 已完成
6. 每次状态变更后验证：
   - 状态正确更新
   - 时间戳正确记录
   - 相关人员收到通知

**预期结果**:
- 状态变更成功
- 变更历史正确记录
- 通知机制正常工作

### 2.3 任务依赖关系测试

**测试用例ID**: TC_TASK_003  
**测试目标**: 验证任务依赖关系设置和管理

**前置条件**: 
- 已创建多个测试任务
- 使用有权限的账号登录

**测试步骤**:
1. 创建任务A："需求分析"
2. 创建任务B："系统设计"，设置依赖任务A
3. 创建任务C："编码实现"，设置依赖任务B
4. 验证依赖关系显示
5. 测试依赖约束（如果实现）

**预期结果**:
- 依赖关系正确建立
- 依赖关系在界面中正确显示
- 依赖约束逻辑正确（如果实现）

---

## 3. 权限管理模块测试

### 3.1 角色权限验证测试

**测试用例ID**: TC_AUTH_003  
**测试目标**: 验证不同角色的权限控制

**测试步骤**:

**团队成员权限测试**:
1. 使用团队成员账号登录
2. 验证可访问的功能：
   - ✅ 查看自己负责的任务
   - ✅ 更新自己任务的状态
   - ✅ 上传任务相关文件
   - ✅ 查看同事任务（只读）
   - ❌ 创建新任务（应被限制）
   - ❌ 删除任务（应被限制）
   - ❌ 访问管理员功能（应被限制）

**部门经理权限测试**:
1. 使用部门经理账号登录
2. 验证可访问的功能：
   - ✅ 查看所有任务
   - ✅ 创建、修改、删除任务
   - ✅ 分配任务负责人
   - ✅ 查看所有报表
   - ✅ 导出报表
   - ❌ 用户管理（应被限制）

**管理员权限测试**:
1. 使用管理员账号登录
2. 验证可访问的功能：
   - ✅ 所有任务管理功能
   - ✅ 用户管理功能
   - ✅ 系统配置功能
   - ✅ 文件删除权限
   - ✅ 操作日志查询

**预期结果**:
- 权限控制严格按照角色定义执行
- 无权限操作被正确拦截
- 权限验证在前端和后端都生效

---

## 4. 文件管理模块测试

### 4.1 文件上传功能测试

**测试用例ID**: TC_FILE_001  
**测试目标**: 验证文件上传功能和格式限制

**前置条件**: 
- 用户已登录
- 准备测试文件

**测试文件准备**:
```
有效文件:
- test_document.docx (Word文档, <5MB)
- test_spreadsheet.xlsx (Excel文档, <5MB)
- test_presentation.pdf (PDF文档, <5MB)
- test_image.jpg (图片文件, <5MB)

无效文件:
- test_large_file.zip (>20MB, 应被拒绝)
- test_script.exe (不支持格式, 应被拒绝)
- test_video.mp4 (不支持格式, 应被拒绝)
```

**测试步骤**:
1. 进入文件管理页面
2. 点击"上传文件"按钮
3. 选择测试文件进行上传
4. 验证上传结果和错误处理
5. 测试文件关联到任务功能

**预期结果**:
- 有效文件上传成功
- 无效文件被正确拒绝并显示错误信息
- 文件信息正确显示在文件列表中
- 文件可以正确关联到任务

### 4.2 文件下载和删除测试

**测试用例ID**: TC_FILE_002  
**测试目标**: 验证文件下载和删除权限控制

**测试步骤**:
1. 使用不同角色账号测试文件下载：
   - 团队成员：可下载所有文件
   - 部门经理：可下载所有文件
   - 管理员：可下载所有文件
2. 测试文件删除权限：
   - 文件上传者：可删除自己上传的文件
   - 管理员：可删除任何文件
   - 其他用户：不能删除他人上传的文件

**预期结果**:
- 下载功能对所有用户开放
- 删除权限严格按照规则控制
- 文件操作日志正确记录

---

## 5. 报表管理模块测试

### 5.1 报表生成测试

**测试用例ID**: TC_REPORT_001  
**测试目标**: 验证报表生成和导出功能

**前置条件**: 
- 系统中已有任务数据
- 使用有报表权限的账号登录

**测试步骤**:
1. 进入报表管理页面
2. 选择报表类型：
   - 任务完成情况报表
   - 项目进度报表
3. 设置筛选条件：
   - 时间范围：最近30天
   - 负责人：选择特定用户
   - 任务状态：已完成
4. 点击"生成报表"按钮
5. 验证报表内容和数据准确性
6. 测试导出功能（如果实现）：
   - Excel格式导出
   - PDF格式导出
   - Word格式导出

**预期结果**:
- 报表数据准确完整
- 筛选条件正确生效
- 导出功能正常工作
- 不同格式导出内容一致

---

## 6. 看板模块测试

### 6.1 看板显示测试

**测试用例ID**: TC_KANBAN_001  
**测试目标**: 验证看板功能的显示和交互

**前置条件**: 
- 系统中已有不同状态的任务
- 用户已登录

**测试步骤**:
1. 进入看板页面 `/kanban`
2. 验证看板布局和显示：
   - 任务按状态分组显示
   - 任务信息完整显示
   - 负责人信息正确显示
3. 测试分组视图切换（如果实现）：
   - 按状态分组
   - 按人员分组
   - 按项目分组
4. 验证任务详情查看功能

**预期结果**:
- 看板正确显示所有任务
- 任务信息准确完整
- 分组功能正常工作
- 界面响应流畅

---

## 7. 甘特图模块测试

### 7.1 甘特图显示测试

**测试用例ID**: TC_GANTT_001  
**测试目标**: 验证甘特图功能的显示和交互

**前置条件**: 
- 系统中已有带时间计划的任务
- 任务间已设置依赖关系

**测试步骤**:
1. 进入甘特图页面 `/gantt`
2. 验证甘特图显示：
   - 任务时间轴正确显示
   - 任务依赖关系正确显示
   - 里程碑事件正确标记
3. 测试交互功能：
   - 时间范围缩放
   - 任务详情查看
   - 关键路径显示（如果实现）
4. 测试导出功能（如果实现）

**预期结果**:
- 甘特图正确显示项目时间线
- 依赖关系清晰可见
- 交互功能响应正常
- 导出功能正常工作

---

## 8. 通知管理模块测试

### 8.1 通知触发测试

**测试用例ID**: TC_NOTIFY_001  
**测试目标**: 验证各种场景下的通知触发机制

**测试场景**:
1. **任务分配通知**:
   - 创建任务并分配给用户
   - 验证负责人收到通知

2. **任务状态变更通知**:
   - 更改任务状态
   - 验证相关人员收到通知

3. **任务延期通知**:
   - 设置任务延期
   - 验证部门经理和管理员收到通知

4. **任务截止提醒**:
   - 创建即将到期的任务
   - 验证提前3天提醒功能

**测试步骤**:
1. 执行各种触发通知的操作
2. 检查通知列表
3. 验证通知内容和接收人
4. 测试通知标记为已读功能
5. 验证通知自动清理机制（2周后）

**预期结果**:
- 通知及时准确触发
- 通知内容详细准确
- 通知接收人正确
- 通知管理功能正常

---

## 9. 后台管理模块测试

### 9.1 用户管理测试

**测试用例ID**: TC_ADMIN_001  
**测试目标**: 验证用户管理功能（仅管理员可访问）

**前置条件**: 
- 使用管理员账号登录
- 进入后台管理页面

**测试步骤**:
1. 进入用户管理页面
2. 测试用户创建功能：
   - 填写用户信息
   - 分配用户角色
   - 保存用户信息
3. 测试用户编辑功能：
   - 修改用户信息
   - 更改用户角色
   - 保存修改
4. 测试用户状态管理：
   - 启用/禁用用户
   - 验证状态变更效果
5. 测试用户删除功能：
   - 删除测试用户
   - 验证删除结果

**预期结果**:
- 用户CRUD操作正常
- 角色分配功能正确
- 用户状态控制有效
- 权限验证严格执行

---

## 10. 数据一致性和业务流程测试

### 10.1 端到端业务流程测试

**测试用例ID**: TC_E2E_001  
**测试目标**: 验证完整的任务管理业务流程

**测试场景**: 完整的项目任务管理流程

**测试步骤**:
1. **项目启动阶段**:
   - 管理员创建项目任务
   - 设置项目基本信息和时间计划
   - 分配项目经理

2. **任务分解阶段**:
   - 项目经理创建子任务
   - 设置任务依赖关系
   - 分配任务负责人

3. **任务执行阶段**:
   - 任务负责人更新任务状态
   - 上传任务相关文件
   - 添加任务评论和进度更新

4. **项目监控阶段**:
   - 查看看板了解项目进度
   - 查看甘特图了解时间计划
   - 生成进度报表

5. **项目完成阶段**:
   - 完成所有子任务
   - 项目经理确认任务完成
   - 生成项目总结报表

**预期结果**:
- 整个流程顺畅无阻
- 数据在各个模块间保持一致
- 通知机制正常工作
- 权限控制严格执行

---

## 📊 测试执行计划

### 测试阶段安排

**第一阶段：基础功能测试（1-2天）**
- 用户认证系统测试
- 基础任务管理测试
- 权限控制测试

**第二阶段：高级功能测试（2-3天）**
- 文件管理测试
- 报表功能测试
- 看板和甘特图测试

**第三阶段：集成测试（1-2天）**
- 通知系统测试
- 后台管理测试
- 端到端业务流程测试

**第四阶段：性能和兼容性测试（1天）**
- 多用户并发测试
- 浏览器兼容性测试
- 响应时间测试

### 测试数据管理

**测试数据创建原则**:
1. 所有测试数据必须通过前端页面创建
2. 测试数据应覆盖各种边界情况
3. 测试完成后及时清理测试数据
4. 保持测试环境的干净和一致性

**测试数据类型**:
- 用户数据：不同角色的测试用户
- 任务数据：不同类型、状态、优先级的任务
- 文件数据：不同格式和大小的测试文件
- 关系数据：任务依赖、用户分配等关系数据

---

## 📋 测试记录模板

### 测试用例执行记录

```
测试用例ID: [TC_XXX_XXX]
执行日期: [YYYY-MM-DD]
执行人员: [测试人员姓名]
测试环境: [浏览器版本/操作系统]

执行结果: [通过/失败/部分通过]

详细记录:
- 步骤1: [执行结果]
- 步骤2: [执行结果]
- ...

发现问题:
1. [问题描述]
2. [问题描述]

备注: [其他说明]
```

### 缺陷记录模板

```
缺陷ID: [BUG_XXX]
发现日期: [YYYY-MM-DD]
严重程度: [严重/一般/轻微]
优先级: [高/中/低]

缺陷描述: [详细描述问题]
重现步骤: [详细的重现步骤]
预期结果: [应该出现的结果]
实际结果: [实际出现的结果]

环境信息:
- 浏览器: [版本信息]
- 操作系统: [版本信息]
- 用户角色: [测试时使用的用户角色]

附件: [截图或日志文件]
```

---

## 🎯 测试完成标准

### 功能测试完成标准
- ✅ 所有测试用例执行完毕
- ✅ 核心功能测试通过率 ≥ 95%
- ✅ 严重缺陷数量 = 0
- ✅ 一般缺陷数量 ≤ 5
- ✅ 用户体验问题得到解决

### 性能测试完成标准
- ✅ 页面加载时间 ≤ 3秒
- ✅ 支持20用户并发访问
- ✅ 数据库响应时间 ≤ 1秒
- ✅ 文件上传下载功能正常

### 兼容性测试完成标准
- ✅ Chrome浏览器兼容性测试通过
- ✅ Firefox浏览器兼容性测试通过
- ✅ Edge浏览器兼容性测试通过
- ✅ 响应式设计在不同屏幕尺寸下正常显示

---

**文档状态**: 待执行  
**审核人**: [待填写]  
**批准日期**: [待填写]